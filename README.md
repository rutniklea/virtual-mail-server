# Virtual Mail Server Setup

This repository contains a script to automate the installation and configuration of a virtual mail server using **Postfix**, **Dovecot**, and **Roundcube**. The server supports sending and receiving emails, secure connections with SSL/TLS, and webmail access.

---

## Features

- ðŸ“¤ **Send and Receive Emails** using your domain.
- ðŸ”’ **SSL/TLS Encryption** for secure communication.
- ðŸ“§ **IMAP/SMTP Integration** for email clients.
- ðŸŒ **Webmail Access** through Roundcube.
- ðŸ” **Log Monitoring** for mail server activity.

---

## Prerequisites

1. A registered domain name (e.g., `learutnik.com`).
2. A server with a public IP address.
3. DNS records configured for the domain:
   - **MX Record**: `mail.yourdomain.com`
   - **A Record**: `mail -> [Your Server IP]`
   - **SPF Record**: `v=spf1 mx ~all`
   - **Optional DKIM and DMARC** for additional security.

---

## Installation

1. **Clone the Repository**:
   ```bash
   git clone https://github.com/rutniklea/virtual-mail-server.git
   cd virtual-mail-server
   ```

2. **Make the Script Executable**:
   ```bash
   chmod +x setup_virtual_mail_server.sh
   ```

3. **Run the Script**:
   ```bash
   sudo ./setup_virtual_mail_server.sh
   ```

---

## What the Script Does

1. **Installs Required Packages**:
   - Postfix (SMTP Server)
   - Dovecot (IMAP Server)
   - Roundcube (Webmail Client)
   - Certbot (for SSL/TLS Certificates)

2. **Configures SSL/TLS** using Let's Encrypt.
3. **Sets Up Postfix** for handling incoming and outgoing mail.
4. **Configures Dovecot** for IMAP access.
5. **Sets Up Roundcube** for webmail access.
6. **Creates a Default Email User**:
   - `info@yourdomain.com` (with a randomly generated password).
7. **Tests the Configuration** to ensure proper functionality.

---

## Accessing the Mail Server

1. **IMAP/SMTP Settings**:
   - **Incoming Server**: `mail.yourdomain.com`
   - **Outgoing Server**: `mail.yourdomain.com`
   - **Port**: 993 (IMAP), 465 (SMTP with SSL/TLS)
   - **Username**: Email address (e.g., `info@learutnik.com`)
   - **Password**: [Generated by the script]

2. **Webmail Access**:
   - Visit: `https://mail.learutnik.com/roundcube`

---

## DNS Records

Ensure the following DNS records are set for your domain:

| Record Type | Name                | Value                  |
|-------------|---------------------|------------------------|
| MX          | @                  | `mail.yourdomain.com`  |
| A           | mail               | `[Your Server IP]`     |
| TXT         | @                  | `v=spf1 mx ~all`       |
| TXT         | _dmarc             | `v=DMARC1; p=none`     |

Optional:
- Generate and configure **DKIM** keys for improved email authentication.

---

## Monitoring Logs

To monitor mail server logs, the script installs `pflogsumm`:

```bash
sudo pflogsumm /var/log/mail.log
```

---

## Troubleshooting

- **Emails Not Delivered**:
  - Check SPF, DKIM, and DMARC records.
  - Ensure your server's IP is not blacklisted.
- **Roundcube Not Accessible**:
  - Verify Apache is running and SSL/TLS is configured correctly.

---

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.

---

## Author

**Lea Rutnik**  
GitHub: [rutniklea](https://github.com/rutniklea)

Feel free to fork, contribute, or raise issues in the repository!
